# smarthome
智能家居项目代码





## 简介

本项目是一个基于C语言和pthread库的多线程应用程序“智能家居”，使用wiringPi库与硬件进行交互，并集成了消息队列、语音接口、TCP套接字接口、烟雾检测接口、接收接口等多种功能模块。

## 功能

- **多线程控制**：通过pthread库实现多线程控制，提高程序的并发性和响应速度。
- **消息队列**：使用自定义的消息队列模块进行进程间通信。
- **硬件接口**：集成了语音识别、TCP套接字通信、烟雾检测等多种硬件接口。

## 依赖

- C编译器（如gcc）
- POSIX线程库（pthread）
- wiringPi库
- 其他自定义模块（如`control.h`, `mq_queue.h`等）

## 安装

1. 确保系统已安装所有依赖库。
2. 克隆项目到本地机器。
3. 使用makefile进行编译。

## 编译

```bash
make
```

## 运行

```bash
sudo -E ./smarthome

sudo -- wiringPi这个库会调用到系统文件
-E   -- 使用了阿里云接口的接入，但是配置的阿里云密匙不在root用户那里，需要-E去指定环境，才能正确读取到密匙 

```

## 代码结构

main.c: 主程序入口，负责线程的创建和管理。
control.h: 控制模块的头文件，定义了控制结构和接口。
mq_queue.h: 消息队列模块的头文件。
voice_interface.h: 语音接口模块的头文件。- `socket_interface.h`: TCP套接字接口模块的头文件。
smoke_interface.h: 烟雾检测接口模块的头文件。
receive_interface.h: 接收接口模块的头文件。
global.h: 全局变量和宏定义。

## 线程和控制结构

程序使用头插法动态创建控制节点，并为每个节点创建一个线程。
 每个控制节点都实现了初始化(`init`)和获取数据(`get`)的函数。

## 消息队列

程序在启动时创建一个消息队列，并在所有线程结束后销毁队列。

## 许可

本项目遵循[MIT许可证](LICENSE)。

## 贡献

欢迎提交Pull Request或创建Issue来贡献代码或报告问题。


